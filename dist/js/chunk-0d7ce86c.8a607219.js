(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d7ce86c"],{3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"48ab":function(t,e,n){},"5e5c":function(t,e,n){"use strict";n("b7a0")},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),o=n("0bfb"),i=n("9e1e"),s="toString",r=/./[s],c=function(t){n("2aba")(RegExp.prototype,s,t,!0)};n("79e5")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):r.name!=s&&c((function(){return r.call(this)}))},b7a0:function(t,e,n){},d0ef:function(t,e,n){"use strict";n("48ab")},dbe1:function(t,e,n){"use strict";n.r(e);n("8e6e"),n("ac6a"),n("456d");var a=n("ade3");n("7f7f");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"search-con search-con-top"},[e("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索项目编号/名称"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[e("Icon",{attrs:{type:"search"}}),t._v("  搜索\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openModal(3)}}},[e("Icon",{attrs:{type:"create"}}),t._v("上传招标文书二维码\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openModal(9)}}},[e("Icon",{attrs:{type:"create"}}),t._v("授权委托书模板上传\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openForm()}}},[e("Icon",{attrs:{type:"create"}}),t._v("+\n    ")],1)],1),e("Table",{attrs:{loading:t.loading,columns:t.columns,data:t.tableData?t.tableData.slice(10*(t.page-1),10*(t.page-1)+10):[]},scopedSlots:t._u([{key:"action",fn:function(n){var a=n.row,o=n.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(a,o,"success")}}},[t._v("审核通过")]),e("Button",{on:{click:function(e){return t.handleEdit(a,o,"false")}}},[t._v("审核不通过")])]}},{key:"view",fn:function(n){n.row;var a=n.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show(a)}}},[t._v("展示")])]}},{key:"status",fn:function(n){var a=n.row;n.index;return[e("div",{style:2==a.status?"color:red":1==a.status?"color:green":""},[t._v("\n        "+t._s(t.turnStatus(a.status))+"\n      ")])]}}])}),e("Page",{attrs:{total:t.tableData?t.tableData.length:1},on:{"on-change":t.changePage}}),e("Modal",{attrs:{title:3==t.businessType?"上传招标文书二维码":"授权委托书模板上传",width:"700"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("Form",{key:t.modalKey,ref:"form",attrs:{"label-width":120}},[e("Upload",{ref:"upload",attrs:{action:"/api/uploadSystemFile",data:{" businessType":t.businessType},"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1)],1),e("Modal",{attrs:{width:"700"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[e("img",{staticStyle:{display:"block",width:"100%"},attrs:{src:t.tableImg,alt:""}})]),e("Modal",{attrs:{title:"新增报名","footer-hide":!0,width:"700"},model:{value:t.modalForm,callback:function(e){t.modalForm=e},expression:"modalForm"}},[e("Form",{key:t.modalKey,ref:"form",attrs:{model:t.formItem,"label-width":120}},[e("FormItem",{attrs:{label:"项目名称、项目编号"}},[e("Select",{attrs:{loading:t.loading2,filterable:""},model:{value:t.formItem.projectCode,callback:function(e){t.$set(t.formItem,"projectCode",e)},expression:"formItem.projectCode"}},t._l(t.options,(function(n,a){return e("Option",{key:a,attrs:{value:n.showCode}},[t._v(t._s(n.name))])})),1)],1),e("FormItem",{attrs:{label:"联系人"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.applicantName,callback:function(e){t.$set(t.formItem,"applicantName",e)},expression:"formItem.applicantName"}})],1),e("FormItem",{attrs:{label:"联系电话"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),e("FormItem",{attrs:{label:"联系地址"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.address,callback:function(e){t.$set(t.formItem,"address",e)},expression:"formItem.address"}})],1),e("FormItem",{attrs:{label:"投标单位名称"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.company,callback:function(e){t.$set(t.formItem,"company",e)},expression:"formItem.company"}})],1),e("FormItem",{attrs:{label:"营业执照编号"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.businessLicense,callback:function(e){t.$set(t.formItem,"businessLicense",e)},expression:"formItem.businessLicense"}})],1),e("FormItem",{attrs:{label:"法定代表人姓名"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.corporate,callback:function(e){t.$set(t.formItem,"corporate",e)},expression:"formItem.corporate"}})],1),e("FormItem",{attrs:{label:"授权委托人姓名"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.consignor,callback:function(e){t.$set(t.formItem,"consignor",e)},expression:"formItem.consignor"}})],1),e("Upload",{ref:"upload2",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":4}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload2}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传营业执照扫描件 ")])],1),e("Upload",{ref:"upload3",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":5}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload3}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传授权委托人身份证扫描件\n        ")])],1),e("Upload",{ref:"upload4",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":6}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload4}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传法定代表人身份证扫描件\n        ")])],1),e("Upload",{ref:"upload5",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":7}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload5}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传授权委托书扫描件 ")])],1),e("Upload",{ref:"upload6",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":8}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload6}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传付款凭证 ")])],1),e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存 ")])],1)],1)],1)],1)},r=[],c=(n("6762"),n("2fdb"),n("53ca")),l=n("50fc"),u=function(){var t=this,e=t._self._c;return e("div",[e("Table",{ref:"selection",attrs:{columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(n){var a=n.row,o=n.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(a,o,"success")}}},[t._v("审核通过")]),e("Button",{on:{click:function(e){return t.handleEdit(a,o,"false")}}},[t._v("审核不通过")])]}},{key:"view",fn:function(n){n.row;var a=n.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show(a)}}},[t._v("展示")])]}},{key:"status",fn:function(n){var a=n.row;n.index;return[e("div",{style:2==a.status?"color:red":1==a.status?"color:green":""},[t._v("\n        "+t._s(t.turnStatus(a.status))+"\n      ")])]}},{key:"file",fn:function(n){var a=n.row;n.index;return[a.detail?e("a",{attrs:{href:a.detail.url}},[t._v(t._s(a.name))]):t._e()]}},{key:"identificationT",fn:function(n){var a=n.row;n.index;return[e("span",{staticStyle:{"font-family":"cursive"}},[t._v(t._s(a.identification))])]}},{key:"img",fn:function(n){var a=n.row;n.index;return[t.checkPng(a.businessLicenses[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.businessLicenses[0].url,expression:"row.businessLicenses[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(a.businessLicenses[0].url)}}}):e("a",{attrs:{href:a.businessLicenses[0].url}},[t._v(t._s(a.businessLicenses[0].name||a.businessLicenses[0].fileName))])]}},{key:"img2",fn:function(n){var a=n.row;n.index;return[t.checkPng(a.consignors[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.consignors[0].url,expression:"row.consignors[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(a.consignors[0].url)}}}):e("a",{attrs:{href:a.consignors[0].url}},[t._v(t._s(a.consignors[0].name||a.consignors[0].fileName))])]}},{key:"img3",fn:function(n){var a=n.row;n.index;return[t.checkPng(a.corporates[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.corporates[0].url,expression:"row.corporates[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(a.corporates[0].url)}}}):e("a",{attrs:{href:a.corporates[0].url}},[t._v(t._s(a.corporates[0].name||a.corporates[0].fileName))])]}},{key:"img4",fn:function(n){var a=n.row;n.index;return[t.checkPng(a.authorizations[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.authorizations[0].url,expression:"row.authorizations[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(a.authorizations[0].url)}}}):e("a",{attrs:{href:a.authorizations[0].url}},[t._v(t._s(a.authorizations[0].name||a.authorizations[0].fileName))])]}},{key:"img5",fn:function(n){var a=n.row;n.index;return[t.checkPng(a.evidencePayments[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.evidencePayments[0].url,expression:"row.evidencePayments[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(a.evidencePayments[0].url)}}}):e("a",{attrs:{href:a.evidencePayments[0].url}},[t._v(t._s(a.evidencePayments[0].name||a.evidencePayments[0].fileName))])]}},{key:"delete",fn:function(n){n.row;var a=n.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteNode(a)}}},[t._v("删除")])]}}])})],1)},d=[],p=(n("6b54"),{components:{},props:["tableData"],data:function(){return{searchValue:"",columns:[{type:"selection",width:60,align:"center"},{width:100,title:"联系人",key:"applicantName"},{width:100,title:"联系电话",key:"phone"},{width:200,title:"联系地址",key:"address"},{width:100,title:"密码",slot:"identificationT",key:"identificationT"},{width:150,title:"投标单位名称",key:"company"},{width:150,title:"营业执照编号",key:"businessLicense"},{width:130,title:"法定代表人姓名",key:"corporate"},{width:130,title:"授权委托人姓名",key:"consignor"},{width:200,title:"营业执照扫描件",slot:"img",key:"businessLicenses"},{width:200,title:"授权委托人身份证扫描件",slot:"img2",key:"consignors"},{width:200,title:"法定代表人身份证扫描件",slot:"img3",key:"corporates"},{width:200,title:"授权委托书扫描件",slot:"img4",key:"authorizations"},{width:200,title:"付款凭证",slot:"img5",key:"evidencePayments"},{width:200,title:"报名时间",key:"createTime"},{width:100,title:"审核状态",slot:"status",key:"status",disable:!0},{width:140,title:"审核",slot:"action",disable:!0},{width:120,title:"汇总展示",slot:"view",disable:!0},{width:120,title:"操作",slot:"delete",disable:!0}],id:0,modalKey:!1,tableImg:"",businessType:3,page:1,password:"",extra:{},options:[]}},created:function(){console.log(this.tableData)},mounted:function(){},methods:{handleEdit:function(t,e,n){var a={id:t.id,projectCode:t.projectCode,identification:t.identification};"success"==n?this.postApprove(a):this.postReject(a)},postApprove:function(t){var e=this;Object(l["k"])(t).then((function(t){e.$emit("getApplications")}))},postReject:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this;postReject(t).then((function(t){e.$emit("getApplications")}))})),deleteNode:function(){var t=this;0!=this.$refs.selection.getSelection().length?this.$Modal.confirm({title:"警告",content:"您确认删除吗？",onOk:function(){var e=[];t.$refs.selection.getSelection().forEach((function(t){e.push(t.id)})),t.postApplicationDelete(e)},onCancel:function(){}}):this.$Message.error("未选择！")},postApplicationDelete:function(t){var e=this;Object(l["j"])({ids:t}).then((function(t){0==t.code&&(e.$emit("getApplications"),e.$Message.success("删除成功！"))}))},show:function(t){var e=this,n="";this.columns.slice(1).forEach((function(a){a.disable||("object"==Object(c["a"])(e.tableData[t][a.key])?n+="<div style='font-size:18px'>".concat(a.title,":<a href='").concat(e.tableData[t][a.key][0].url,"' >").concat(e.tableData[t][a.key][0].name||e.tableData[t][a.key][0].fileName,"</a></div>"):n+="<div style='font-size:18px'>".concat(a.title,":").concat(e.tableData[t][a.key]||"--","</div>"))})),n+="\n      <a style='display:block;margin-top:20px' href='".concat(window.location.origin+"/api/downloadApplication?identification="+this.tableData[t].identification,"'>下载excel</a>\n      "),this.$Modal.info({title:"汇总展示",content:"".concat(n),width:"60%"})},turnStatus:function(t){switch(t+""){case"0":return"待审核";case"1":return"已通过";case"2":return"已拒绝"}return"--"},cancel:function(){},checkPng:function(t){return t.includes("png")||t.includes("jpg")||t.includes("jpeg")},openModal:function(t){this.businessType=t,this.modal=!0},openDialog:function(t){this.tableImg=t,this.modal1=!0}}}),f=p,h=(n("5e5c"),n("2877")),m=Object(h["a"])(f,u,d,!1,null,"3a8ab0bf",null),b=m.exports;function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={components:{innerTable:b},data:function(){var t,e=this;return{searchValue:"",columns:[(t={type:"selection",width:60,align:"center"},Object(a["a"])(t,"type","expand"),Object(a["a"])(t,"render",(function(t,n){return t(b,{props:{tableData:n.row.detail},on:{getApplications:e.getApplications}})})),t),{title:"项目编号",key:"projectCode"},{title:"项目名称",key:"projectName"}],data:[],tableDataMeta:[],tableData:[],modal:!1,modal1:!1,modalForm:!1,formItem:{},uploadList:[],uploadList2:[],uploadList3:[],uploadList4:[],uploadList5:[],uploadList6:[],id:0,modalKey:!1,tableImg:"",businessType:3,loading:!0,loading2:!0,page:1,password:"",extra:{},options:[]}},created:function(){},mounted:function(){this.uploadList=this.$refs.upload.fileList,this.uploadList2=this.$refs.upload2.fileList,this.uploadList3=this.$refs.upload3.fileList,this.uploadList4=this.$refs.upload4.fileList,this.uploadList5=this.$refs.upload5.fileList,this.uploadList6=this.$refs.upload6.fileList,this.getApplications()},methods:{getAnnouncement:function(){var t=this;Object(l["a"])({announcementType:"purchase"}).then((function(e){t.options=e.data.announcements.purchase,t.loading2=!1}))},postApplication:function(){var t=this;void 0!=this.$refs.upload6.fileList[0]&&void 0!=this.$refs.upload2.fileList[0]&&void 0!=this.$refs.upload3.fileList[0]&&void 0!=this.$refs.upload4.fileList[0]&&void 0!=this.$refs.upload5.fileList[0]?Object(l["i"])({projectCode:this.formItem.projectCode,identification:this.password,detail:y(y({},this.formItem),{},{businessLicenses:[this.$refs.upload2.fileList[0].response.data],consignors:[this.$refs.upload3.fileList[0].response.data],corporates:[this.$refs.upload4.fileList[0].response.data],authorizations:[this.$refs.upload5.fileList[0].response.data],evidencePayments:[this.$refs.upload6.fileList[0].response.data]})}).then((function(e){0==e.code&&(t.$Message.success("报名成功！"),t.modalForm=!1,t.getApplications())})):this.$Message.warning("有文件未提交，请核对！")},getIdentification:function(){var t=this;return Object(l["f"])().then((function(e){0==e.code&&(t.password=e.data.identification,t.extra={identification:t.password})}))},openForm:function(){this.modalForm=!0,this.getAnnouncement(),this.getIdentification()},show:function(t){var e=this,n="";this.columns.slice(1).forEach((function(a){a.disable||("object"==Object(c["a"])(e.tableData[t][a.key])?n+="<div style='font-size:18px'>".concat(a.title,":<a href='").concat(e.tableData[t][a.key][0].url,"' >").concat(e.tableData[t][a.key][0].name||e.tableData[t][a.key][0].fileName,"</a></div>"):n+="<div style='font-size:18px'>".concat(a.title,":").concat(e.tableData[t][a.key]||"--","</div>"))})),this.$Modal.info({title:"汇总展示",content:"".concat(n),width:"60%"})},changePage:function(t){this.page=t},checkPng:function(t){return t.includes("png")||t.includes("jpg")||t.includes("jpeg")},turnStatus:function(t){switch(t+""){case"0":return"待审核";case"1":return"已通过";case"2":return"已拒绝"}return"--"},getApplications:function(){var t=this;Object(l["b"])().then((function(e){var n=[],a=[],o=[];e.data.applications.forEach((function(t){n.push(y(y({},t),t.detail))})),n.forEach((function(t){o.includes(t.projectCode)?a.filter((function(e){e.projectCode===t.projectCode&&e.detail.push(y({},t))})):(o.push(t.projectCode),a.push({projectCode:t.projectCode,projectName:t.projectName,detail:[y({},t)]}))})),t.tableDataMeta=a,t.tableData=a,t.loading=!1}))},handleSearch:function(){var t=this;this.tableData=this.tableDataMeta.filter((function(e){var n;return e.projectCode.includes(t.searchValue)||(null===e||void 0===e||null===(n=e.projectName)||void 0===n?void 0:n.includes(t.searchValue))}))},handleSuccess:function(t,e){0==t.code&&(e.url=t.data.url,e.fileName=t.data.fileName,e.name=t.data.name)},handleBeforeUpload:function(){var t=this.uploadList.length<1;return this.tempCheck(t)},handleBeforeUpload2:function(){var t=this.uploadList2.length<1;return this.tempCheck(t)},handleBeforeUpload3:function(){var t=this.uploadList3.length<1;return this.tempCheck(t)},handleBeforeUpload4:function(){var t=this.uploadList4.length<1;return this.tempCheck(t)},handleBeforeUpload5:function(){var t=this.uploadList5.length<1;return this.tempCheck(t)},handleBeforeUpload6:function(){var t=this.uploadList6.length<1;return this.tempCheck(t)},tempCheck:function(t){return t||this.$Notice.warning({title:"最多上传一个文件"}),t},postApprove:function(t){var e=this;Object(l["k"])(t).then((function(t){e.getApplications()}))},postReject:function(t){var e=this;Object(l["p"])(t).then((function(t){e.getApplications()}))},handleEdit:function(t,e,n){var a={id:t.id,projectCode:t.projectCode,identification:t.identification};"success"==n?this.postApprove(a):this.postReject(a)},ok:function(){this.postApplication()},cancel:function(){},openModal:function(t){this.businessType=t,this.modal=!0},openDialog:function(t){this.tableImg=t,this.modal1=!0}}},k=g,w=(n("d0ef"),Object(h["a"])(k,s,r,!1,null,"23e619f6",null));e["default"]=w.exports}}]);