(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3800cc2a"],{"50fc":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"i",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"g",(function(){return c})),a.d(e,"b",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"k",(function(){return p})),a.d(e,"d",(function(){return f})),a.d(e,"j",(function(){return m}));var n=a("66df");function o(){return n["a"].request({url:"/api/banners",method:"get"})}function i(t){return n["a"].request({url:"/api/banners",method:"post",data:t})}function s(t){return n["a"].request({url:"/api/announcements",method:"get",params:t})}function r(t){return n["a"].request({url:"/api/announcement",method:"post",data:t})}function l(){return n["a"].request({url:"/api/identification",method:"get"})}function c(t){return n["a"].request({url:"/api/application",method:"post",data:t})}function u(){return n["a"].request({url:"/api/applications",method:"get"})}function d(t){return n["a"].request({url:"/api/application/approve",method:"post",data:t})}function p(t){return n["a"].request({url:"/api/application/reject",method:"post",data:t})}function f(){return n["a"].request({url:"/api/allBids",method:"get"})}function m(t){return n["a"].request({url:"/api/clarification",method:"post",data:t})}},"7c24":function(t,e,a){},c461:function(t,e,a){"use strict";a("7c24")},dbe1:function(t,e,a){"use strict";a.r(e);a("8e6e"),a("ac6a"),a("456d");var n=a("ade3");a("7f7f");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"search-con search-con-top"},[e("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索项目编号/名称"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[e("Icon",{attrs:{type:"search"}}),t._v("  搜索\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openModal(3)}}},[e("Icon",{attrs:{type:"create"}}),t._v("上传招标文书二维码\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openModal(9)}}},[e("Icon",{attrs:{type:"create"}}),t._v("授权委托书模板上传\n    ")],1),e("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(e){return t.openForm()}}},[e("Icon",{attrs:{type:"create"}}),t._v("+\n    ")],1)],1),e("Table",{attrs:{loading:t.loading,columns:t.columns,data:t.tableData?t.tableData.slice(10*(t.page-1),10*(t.page-1)+10):[]},scopedSlots:t._u([{key:"action",fn:function(a){var n=a.row,o=a.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(n,o,"success")}}},[t._v("审核通过")]),e("Button",{on:{click:function(e){return t.handleEdit(n,o,"false")}}},[t._v("审核不通过")])]}},{key:"view",fn:function(a){a.row;var n=a.index;return[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show(n)}}},[t._v("展示")])]}},{key:"status",fn:function(a){var n=a.row;a.index;return[e("div",{style:2==n.status?"color:red":1==n.status?"color:green":""},[t._v("\n        "+t._s(t.turnStatus(n.status))+"\n      ")])]}},{key:"file",fn:function(a){var n=a.row;a.index;return[n.detail?e("a",{attrs:{href:n.detail.url}},[t._v(t._s(n.name))]):t._e()]}},{key:"img",fn:function(a){var n=a.row;a.index;return[t.checkPng(n.businessLicenses[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.businessLicenses[0].url,expression:"row.businessLicenses[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(n.businessLicenses[0].url)}}}):e("a",{attrs:{href:n.businessLicenses[0].url}},[t._v(t._s(n.businessLicenses[0].name||n.businessLicenses[0].fileName))])]}},{key:"img2",fn:function(a){var n=a.row;a.index;return[t.checkPng(n.consignors[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.consignors[0].url,expression:"row.consignors[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(n.consignors[0].url)}}}):e("a",{attrs:{href:n.consignors[0].url}},[t._v(t._s(n.consignors[0].name||n.consignors[0].fileName))])]}},{key:"img3",fn:function(a){var n=a.row;a.index;return[t.checkPng(n.corporates[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.corporates[0].url,expression:"row.corporates[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(n.corporates[0].url)}}}):e("a",{attrs:{href:n.corporates[0].url}},[t._v(t._s(n.corporates[0].name||n.corporates[0].fileName))])]}},{key:"img4",fn:function(a){var n=a.row;a.index;return[t.checkPng(n.authorizations[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.authorizations[0].url,expression:"row.authorizations[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(n.authorizations[0].url)}}}):e("a",{attrs:{href:n.authorizations[0].url}},[t._v(t._s(n.authorizations[0].name||n.authorizations[0].fileName))])]}},{key:"img5",fn:function(a){var n=a.row;a.index;return[t.checkPng(n.evidencePayments[0].fileName)?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.evidencePayments[0].url,expression:"row.evidencePayments[0].url"}],staticClass:"tableImg",attrs:{alt:""},on:{click:function(e){return t.openDialog(n.evidencePayments[0].url)}}}):e("a",{attrs:{href:n.evidencePayments[0].url}},[t._v(t._s(n.evidencePayments[0].name||n.evidencePayments[0].fileName))])]}}])}),e("Page",{attrs:{total:t.tableData?t.tableData.length:1},on:{"on-change":t.changePage}}),e("Modal",{attrs:{title:3==t.businessType?"上传招标文书二维码":"授权委托书模板上传",width:"700"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("Form",{key:t.modalKey,ref:"form",attrs:{"label-width":120}},[e("Upload",{ref:"upload",attrs:{action:"/api/uploadSystemFile",data:{" businessType":t.businessType},"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1)],1),e("Modal",{attrs:{width:"700"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[e("img",{staticStyle:{display:"block",width:"100%"},attrs:{src:t.tableImg,alt:""}})]),e("Modal",{attrs:{title:"新增报名","footer-hide":!0,width:"700"},model:{value:t.modalForm,callback:function(e){t.modalForm=e},expression:"modalForm"}},[e("Form",{key:t.modalKey,ref:"form",attrs:{model:t.formItem,"label-width":120}},[e("FormItem",{attrs:{label:"项目名称、项目编号"}},[e("Select",{attrs:{loading:t.loading2,filterable:""},model:{value:t.formItem.projectCode,callback:function(e){t.$set(t.formItem,"projectCode",e)},expression:"formItem.projectCode"}},t._l(t.options,(function(a,n){return e("Option",{key:n,attrs:{value:a.code}},[t._v(t._s(a.name))])})),1)],1),e("FormItem",{attrs:{label:"联系人"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.applicantName,callback:function(e){t.$set(t.formItem,"applicantName",e)},expression:"formItem.applicantName"}})],1),e("FormItem",{attrs:{label:"联系电话"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),e("FormItem",{attrs:{label:"联系地址"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.address,callback:function(e){t.$set(t.formItem,"address",e)},expression:"formItem.address"}})],1),e("FormItem",{attrs:{label:"投标单位名称"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.company,callback:function(e){t.$set(t.formItem,"company",e)},expression:"formItem.company"}})],1),e("FormItem",{attrs:{label:"营业执照编号"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.businessLicense,callback:function(e){t.$set(t.formItem,"businessLicense",e)},expression:"formItem.businessLicense"}})],1),e("FormItem",{attrs:{label:"法定代表人姓名"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.corporate,callback:function(e){t.$set(t.formItem,"corporate",e)},expression:"formItem.corporate"}})],1),e("FormItem",{attrs:{label:"授权委托人姓名"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.consignor,callback:function(e){t.$set(t.formItem,"consignor",e)},expression:"formItem.consignor"}})],1),e("Upload",{ref:"upload2",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":4}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload2}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传营业执照扫描件\n        ")])],1),e("Upload",{ref:"upload3",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":5}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload3}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传授权委托人身份证扫描件\n        ")])],1),e("Upload",{ref:"upload4",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":6}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload4}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传法定代表人身份证扫描件\n        ")])],1),e("Upload",{ref:"upload5",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":7}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload5}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传授权委托书扫描件\n        ")])],1),e("Upload",{ref:"upload6",attrs:{action:"/api/upload",data:i(i({},t.extra),{},{" businessType":8}),"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload6}},[e("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传付款凭证\n        ")])],1),e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存\n        ")])],1)],1)],1)],1)},r=[],l=(a("6762"),a("2fdb"),a("53ca")),c=a("50fc");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={components:{},data:function(){return{searchValue:"",columns:[{width:100,title:"项目编号",key:"projectCode"},{width:200,title:"密码",key:"identification"},{width:100,title:"联系人",key:"applicantName"},{width:100,title:"联系电话",key:"phone"},{width:200,title:"联系地址",key:"address"},{width:150,title:"投标单位名称",key:"company"},{width:150,title:"营业执照编号",key:"BusinessLicense"},{width:130,title:"法定代表人姓名",key:"corporate"},{width:130,title:"授权委托人姓名",key:"Consignor"},{width:200,title:"营业执照扫描件",slot:"img",key:"businessLicenses"},{width:200,title:"授权委托人身份证扫描件",slot:"img2",key:"consignors"},{width:200,title:"法定代表人身份证扫描件",slot:"img3",key:"corporates"},{width:200,title:"授权委托书扫描件",slot:"img4",key:"authorizations"},{width:200,title:"付款凭证",slot:"img5",key:"evidencePayments"},{width:100,title:"审核状态",slot:"status",key:"status",disable:!0},{width:140,title:"审核",slot:"action",disable:!0},{width:120,title:"汇总展示",slot:"view",disable:!0}],data:[],tableDataMeta:[],tableData:[],modal:!1,modal1:!1,modalForm:!1,formItem:{},uploadList:[],uploadList2:[],uploadList3:[],uploadList4:[],uploadList5:[],uploadList6:[],id:0,modalKey:!1,tableImg:"",businessType:3,loading:!0,loading2:!0,page:1,password:"",extra:{},options:[]}},created:function(){},mounted:function(){this.uploadList=this.$refs.upload.fileList,this.uploadList2=this.$refs.upload2.fileList,this.uploadList3=this.$refs.upload3.fileList,this.uploadList4=this.$refs.upload4.fileList,this.uploadList5=this.$refs.upload5.fileList,this.uploadList6=this.$refs.upload6.fileList,this.getApplications()},methods:{getAnnouncement:function(){var t=this;Object(c["a"])({announcementType:"purchase"}).then((function(e){t.options=e.data.announcements.purchase,t.loading2=!1}))},postApplication:function(){var t=this;void 0!=this.$refs.upload6.fileList[0]&&void 0!=this.$refs.upload2.fileList[0]&&void 0!=this.$refs.upload3.fileList[0]&&void 0!=this.$refs.upload4.fileList[0]&&void 0!=this.$refs.upload5.fileList[0]?Object(c["g"])({projectCode:this.formItem.projectCode,identification:this.password,detail:d(d({},this.formItem),{},{businessLicenses:[this.$refs.upload2.fileList[0].response.data],consignors:[this.$refs.upload3.fileList[0].response.data],corporates:[this.$refs.upload4.fileList[0].response.data],authorizations:[this.$refs.upload5.fileList[0].response.data],evidencePayments:[this.$refs.upload6.fileList[0].response.data]})}).then((function(e){0==e.code&&(t.$Message.success("报名成功！"),t.modalForm=!1,t.getApplications())})):this.$Message.warning("有文件未提交，请核对！")},getIdentification:function(){var t=this;return Object(c["e"])().then((function(e){0==e.code&&(t.password=e.data.identification,t.extra={identification:t.password})}))},openForm:function(){this.modalForm=!0,this.getAnnouncement(),this.getIdentification()},show:function(t){var e=this,a="";this.columns.forEach((function(n){n.disable||("object"==Object(l["a"])(e.tableData[t][n.key])?a+="<div style='font-size:18px'>".concat(n.title,":<a href='").concat(e.tableData[t][n.key][0].url,"' >").concat(e.tableData[t][n.key][0].name||e.tableData[t][n.key][0].fileName,"</a></div>"):a+="<div style='font-size:18px'>".concat(n.title,":").concat(e.tableData[t][n.key]||"--","</div>"))})),this.$Modal.info({title:"汇总展示",content:"".concat(a),width:"60%"})},changePage:function(t){this.page=t},checkPng:function(t){return t.includes("png")||t.includes("jpg")||t.includes("jpeg")},turnStatus:function(t){switch(t+""){case"0":return"待审核";case"1":return"已通过";case"2":return"已拒绝"}return"--"},getApplications:function(){var t=this;Object(c["b"])().then((function(e){var a=[];e.data.applications.forEach((function(t){a.push(d(d({},t),t.detail))})),t.tableDataMeta=a,t.tableData=a,t.loading=!1}))},handleSearch:function(){var t=this;this.tableData=this.tableDataMeta.filter((function(e){var a;return e.projectCode.includes(t.searchValue)||(null===e||void 0===e||null===(a=e.projectName)||void 0===a?void 0:a.includes(t.searchValue))}))},handleSuccess:function(t,e){0==t.code&&(e.url=t.data.url,e.fileName=t.data.fileName,e.name=t.data.name)},handleBeforeUpload:function(){var t=this.uploadList.length<1;return this.tempCheck(t)},handleBeforeUpload2:function(){var t=this.uploadList2.length<1;return this.tempCheck(t)},handleBeforeUpload3:function(){var t=this.uploadList3.length<1;return this.tempCheck(t)},handleBeforeUpload4:function(){var t=this.uploadList4.length<1;return this.tempCheck(t)},handleBeforeUpload5:function(){var t=this.uploadList5.length<1;return this.tempCheck(t)},handleBeforeUpload6:function(){var t=this.uploadList6.length<1;return this.tempCheck(t)},tempCheck:function(t){return t||this.$Notice.warning({title:"最多上传一个文件"}),t},postApprove:function(t){var e=this;Object(c["h"])(t).then((function(t){e.getApplications()}))},postReject:function(t){var e=this;Object(c["k"])(t).then((function(t){e.getApplications()}))},handleEdit:function(t,e,a){var n={id:t.id,projectCode:t.projectCode,identification:t.identification};"success"==a?this.postApprove(n):this.postReject(n)},ok:function(){this.postApplication()},cancel:function(){},openModal:function(t){this.businessType=t,this.modal=!0},openDialog:function(t){this.tableImg=t,this.modal1=!0}}},f=p,m=(a("c461"),a("2877")),h=Object(m["a"])(f,s,r,!1,null,"3fee85b1",null);e["default"]=h.exports}}]);