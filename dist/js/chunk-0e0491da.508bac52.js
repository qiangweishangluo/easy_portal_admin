(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0491da"],{4816:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin"},[e("upload",{key:t.flash,attrs:{uploadConfig:t.uploadConfig,list:t.list},on:{getBannerList:t.getBannerList}}),e("Button",{attrs:{type:"primary"},on:{click:t.postBanners}},[t._v("更新轮播")]),t.checkAdmin()?e("div",[e("Form",{ref:"form",attrs:{"label-width":120}},[e("FormItem",{attrs:{label:"用户名"}},[e("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("FormItem",{attrs:{label:"密码"}},[e("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码"},model:{value:t.pwi,callback:function(e){t.pwi=e},expression:"pwi"}})],1),e("Button",{attrs:{type:"primary"},on:{click:t.postAuthorizations}},[t._v("更新密码")])],1)],1):t._e()],1)},a=[],s=(i("ac6a"),i("28a5"),i("50fc")),o=(i("7f7f"),function(){var t=this,e=t._self._c;return e("div",[t._l(t.uploadList,(function(i,n){return e("div",{key:n,staticStyle:{display:"inline-block"}},["finished"===i.status?[e("div",{staticClass:"demo-upload-list"},[e("img",{attrs:{src:i.url,fit:"cover",width:"100%",height:"100%"}}),e("div",{staticClass:"demo-upload-list-cover"},[e("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(i.name)}}}),e("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove(i)}}})],1)]),e("Input",{staticStyle:{width:"200px"},attrs:{maxlength:100,"show-word-limit":"",placeholder:"图片简介"},model:{value:i.content,callback:function(e){t.$set(i,"content",e)},expression:"item.content"}})]:[e("div",{staticClass:"demo-upload-list"},[i.showProgress?e("Progress",{attrs:{percent:i.percentage,"hide-info":""}}):t._e()],1)]],2)})),e("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":t.defaultList,"on-success":t.handleSuccess,data:t.uploadConfig,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:"",type:"drag",action:"/api/uploadSystemFile"}},[e("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[e("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],2)}),l=[],r={props:{uploadConfig:{type:Object,default:function(){}},list:{type:Array,default:function(){return[]}}},data:function(){return{defaultList:[],imgName:"",visible:!1,uploadList:[]}},watch:{uploadList:{handler:function(t){this.getBannerList(t)},deep:!0,immediate:!1}},methods:{handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){console.log(t),0==t.code&&(e.url=t.data.url,e.fileName=t.data.fileName,console.log(this.uploadList))},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),t},getBannerList:function(t){this.$emit("getBannerList",t)}},created:function(){this.defaultList=this.list||[]},mounted:function(){this.uploadList=this.$refs.upload.fileList}},c=r,u=(i("5db1"),i("2877")),d=Object(u["a"])(c,o,l,!1,null,null,null),p=d.exports,f={components:{upload:p},data:function(){return{uploadConfig:{businessType:1},bannerList:[],id:0,list:[],flash:!1,username:"",pwi:""}},created:function(){this.getBanners(),this.getAuthorizations()},methods:{checkAdmin:function(){return"admin"==this.$cookies.get("user").split(",")[0].split(":")[1]},getBanners:function(){var t=this;Object(s["d"])().then((function(e){0==e.code&&(t.id=e.data.id,e.data.banners.forEach((function(t){t.name=t.fileName})),t.list=e.data.banners,t.flash=!t.flash)}))},getAuthorizations:function(){var t=this;Object(s["c"])().then((function(e){0==e.code&&(t.pwi=e.data.authorizations[0].password,t.username=e.data.authorizations[0].username)}))},postAuthorizations:function(){var t=this;Object(s["l"])({id:1,username:this.username,password:this.pwi}).then((function(e){0==e.code&&t.$Message.success("修改成功！")}))},postBanners:function(){var t=this,e=[];this.bannerList.forEach((function(t){e.push({fileName:t.fileName,content:t.content,businessType:"banner"})})),Object(s["m"])({banners:{id:this.id,detail:e,type:"banner"}}).then((function(e){0==e.code&&t.$Message.success("修改成功！")}))},getBannerList:function(t){this.bannerList=t}}},h=f,m=Object(u["a"])(h,n,a,!1,null,null,null);e["default"]=m.exports},"5db1":function(t,e,i){"use strict";i("97f9")},"97f9":function(t,e,i){}}]);