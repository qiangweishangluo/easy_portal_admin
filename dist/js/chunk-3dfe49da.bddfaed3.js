(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dfe49da"],{4816:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin"},[e("upload",{key:t.flash,attrs:{uploadConfig:t.uploadConfig,list:t.list},on:{getBannerList:t.getBannerList}}),e("Button",{attrs:{type:"primary"},on:{click:t.postBanners}},[t._v("更新轮播")])],1)},a=[],s=(n("ac6a"),n("50fc")),o=(n("7f7f"),function(){var t=this,e=t._self._c;return e("div",[t._l(t.uploadList,(function(n,i){return e("div",{key:i,staticStyle:{display:"inline-block"}},["finished"===n.status?[e("div",{staticClass:"demo-upload-list"},[e("img",{attrs:{src:n.url,fit:"cover",width:"100%",height:"100%"}}),e("div",{staticClass:"demo-upload-list-cover"},[e("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(n.name)}}}),e("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove(n)}}})],1)]),e("Input",{staticStyle:{width:"200px"},attrs:{maxlength:100,"show-word-limit":"",placeholder:"图片简介"},model:{value:n.content,callback:function(e){t.$set(n,"content",e)},expression:"item.content"}})]:[e("div",{staticClass:"demo-upload-list"},[n.showProgress?e("Progress",{attrs:{percent:n.percentage,"hide-info":""}}):t._e()],1)]],2)})),e("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":t.defaultList,"on-success":t.handleSuccess,data:t.uploadConfig,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,multiple:"",type:"drag",action:"/api/uploadSystemFile"}},[e("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[e("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],2)}),l=[],r={props:{uploadConfig:{type:Object,default:function(){}},list:{type:Array,default:function(){return[]}}},data:function(){return{defaultList:[],imgName:"",visible:!1,uploadList:[]}},watch:{uploadList:{handler:function(t){this.getBannerList(t)},deep:!0,immediate:!1}},methods:{handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){console.log(t),0==t.code&&(e.url=t.data.url,e.fileName=t.data.fileName,console.log(this.uploadList))},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),t},getBannerList:function(t){this.$emit("getBannerList",t)}},created:function(){this.defaultList=this.list||[]},mounted:function(){this.uploadList=this.$refs.upload.fileList}},u=r,c=(n("5db1"),n("2877")),d=Object(c["a"])(u,o,l,!1,null,null,null),f=d.exports,p={components:{upload:f},data:function(){return{uploadConfig:{businessType:1},bannerList:[],id:0,list:[],flash:!1}},created:function(){this.getBanners()},methods:{getBanners:function(){var t=this;Object(s["b"])().then((function(e){0==e.code&&(t.id=e.data.id,e.data.banners.forEach((function(t){t.name=t.fileName})),t.list=e.data.banners,t.flash=!t.flash,console.log(t.list))}))},postBanners:function(){var t=[];this.bannerList.forEach((function(e){t.push({fileName:e.fileName,content:e.content,businessType:"banner"})})),Object(s["d"])({banners:{id:this.id,detail:t,type:"banner"}}).then((function(t){console.log(t)}))},getBannerList:function(t){this.bannerList=t}}},h=p,m=Object(c["a"])(h,i,a,!1,null,null,null);e["default"]=m.exports},"50fc":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return l}));var i=n("66df");function a(){return i["a"].request({url:"/api/banners",method:"get"})}function s(t){return i["a"].request({url:"/api/banners",method:"post",data:t})}function o(){return i["a"].request({url:"/api/announcements",method:"get"})}function l(t){return i["a"].request({url:"/api/announcement",method:"post",data:t})}},"5db1":function(t,e,n){"use strict";n("97f9")},"97f9":function(t,e,n){}}]);