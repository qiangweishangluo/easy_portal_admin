(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2aed42"],{"3a68":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"search-con search-con-top"},[t("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),t("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleSearch}},[t("Icon",{attrs:{type:"search"}}),e._v("  搜索\n    ")],1),t("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.openModal}},[t("Icon",{attrs:{type:"create"}}),e._v("新建公告\n    ")],1)],1),t("Tabs",{model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},e._l(e.tabsOption,(function(e,a){return t("TabPane",{key:a,attrs:{label:e.label,name:e.name}})})),1),t("Table",{attrs:{columns:e.columns,data:e.tableData[e.tabs]},scopedSlots:e._u([{key:"action",fn:function(a){var n=a.row,o=a.index;return[t("Button",{on:{click:function(t){return e.handleEdit(n,o)}}},[e._v("编辑")])]}},{key:"file",fn:function(a){var n=a.row;a.index;return[n.detail?t("a",{attrs:{href:n.detail.url}},[e._v(e._s(n.name))]):e._e()]}}])}),t("Modal",{attrs:{title:"公告",width:"700"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[t("Form",{key:e.modalKey,ref:"form",attrs:{model:e.formItem,"label-width":120}},[t("FormItem",{attrs:{label:"公告编码"}},[t("Input",{attrs:{placeholder:"请输入"},model:{value:e.formItem.code,callback:function(t){e.$set(e.formItem,"code",t)},expression:"formItem.code"}})],1),t("FormItem",{attrs:{label:"公告名称"}},[t("Input",{attrs:{placeholder:"请输入"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),t("FormItem",{attrs:{label:"公告类型"}},[t("Select",{model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},e._l(e.Options,(function(a,n){return t("Option",{key:n,attrs:{value:a.value}},[e._v(e._s(a.name))])})),1)],1),t("FormItem",{attrs:{label:"报名开始时间"}},[t("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},model:{value:e.formItem.startTime,callback:function(t){e.$set(e.formItem,"startTime",t)},expression:"formItem.startTime"}})],1),t("FormItem",{attrs:{label:"报名结束时间"}},[t("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},model:{value:e.formItem.endTime,callback:function(t){e.$set(e.formItem,"endTime",t)},expression:"formItem.endTime"}})],1),t("FormItem",{attrs:{label:"开标时间"}},[t("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},model:{value:e.formItem.time,callback:function(t){e.$set(e.formItem,"time",t)},expression:"formItem.time"}})],1),t("Upload",{ref:"upload",attrs:{action:"/api/uploadSystemFile",data:{" businessType":2},"on-success":e.handleSuccess,"before-upload":e.handleBeforeUpload}},[t("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传文件")])],1)],1)],1)],1)},o=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),l=a("50fc");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={components:{},data:function(){return{searchValue:"",tabs:"purchase",columns:[{title:"名称",key:"name"},{title:"编号",key:"code"},{title:"开标时间",key:"time"},{title:"报名开始时间",key:"startTime"},{title:"报名结束时间",key:"endTime"},{title:"文件",slot:"file"},{title:"操作",slot:"action"}],data:[],tableData:{},modal:!1,formItem:{code:"",name:"",type:"",startTime:"",endTime:"",time:""},Options:[{value:1,name:"采购公告"},{value:2,name:"更正公告"},{value:3,name:"中标成交公告"},{value:4,name:"公正公告"},{value:5,name:"废弃终止"}],tabsOption:[{label:"采购公告",name:"purchase"},{label:"更正公告",name:"amend"},{label:"中标成交公告",name:"deal"},{label:"公正公告",name:"dealJustice"},{label:"废弃终止",name:"abolish"}],uploadList:[],id:0,modalKey:!1}},created:function(){this.getAnnouncement()},mounted:function(){this.uploadList=this.$refs.upload.fileList},methods:{handleSearch:function(){},handleSuccess:function(e,t){console.log(e),0==e.code&&(t.url=e.data.url,t.fileName=e.data.fileName,console.log(this.uploadList))},handleBeforeUpload:function(){var e=this.uploadList.length<1;return e||this.$Notice.warning({title:"最多上传一个文件"}),e},handleEdit:function(e,t){console.log(e,t),this.id=e.id,this.formItem=e,this.modal=!0},getAnnouncement:function(){var e=this;Object(l["a"])().then((function(t){0==t.code&&(e.tableData=t.data.announcements)}))},postAnnouncement:function(){var e=this,t={name:this.formItem.name,code:this.formItem.code,type:this.formItem.type,time:new Date(this.formItem.time).getTime(),startTime:new Date(this.formItem.startTime).getTime(),endTime:new Date(this.formItem.endTime).getTime()};Object(l["c"])(s({id:this.id,detail:{url:this.uploadList[0].url,fileName:this.uploadList[0].fileName,businessType:"announcement"}},t)).then((function(t){0==t.code&&e.getAnnouncement()}))},ok:function(){this.postAnnouncement()},cancel:function(){},openModal:function(){this.id=0,this.modal=!0}}},m=c,u=(a("8f7b"),a("2877")),d=Object(u["a"])(m,n,o,!1,null,"79a094aa",null);t["default"]=d.exports},"407e":function(e,t,a){},"50fc":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return i}));var n=a("66df");function o(){return n["a"].request({url:"/api/banners",method:"get"})}function r(e){return n["a"].request({url:"/api/banners",method:"post",data:e})}function l(){return n["a"].request({url:"/api/announcements",method:"get"})}function i(e){return n["a"].request({url:"/api/announcement",method:"post",data:e})}},"8f7b":function(e,t,a){"use strict";a("407e")}}]);